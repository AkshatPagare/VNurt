function showMessage(n,t,i,r){document.getElementById("messageHeader").innerText=i;document.getElementById("messageBody").innerText=r;t=="error"?(console.log("messaging"),document.getElementById("messageBody").style.backgroundColor="maroon"):t=="success"&&(document.getElementById("messageBody").style.backgroundColor="#66CD00");parent.$("#messageContent").click(function(){hideMessage(900)})}function showHideContent(n){document.getElementById("messageHeader").innerText="";document.getElementById("messageBody").innerText="";document.getElementById("messageBody").style.backgroundColor="transparent";document.getElementById("verificationTextDIV").style.display="none";document.getElementById("ConsentDiv").style.display="none";$("verificationText").value="";document.getElementById("referralCodeDIV").style.display="none";$("referralCode").value="";n=="signin"?(document.getElementById("FullName").style.display="block",document.getElementById("UserTypeSignUp").style.display="block",document.getElementById("btnCancelSignUp").style.display="block",document.getElementById("UserTypeSignUp").className="btn-submit"):n=="signup"?(document.getElementById("signupControls").style.display="block",document.getElementById("referralCodeDIV").style.display="block",document.getElementById("btnSignUpServer").style.display="block",document.getElementById("ConsentDiv").style.display="block",document.getElementById("btnSignUp").style.display="none",document.getElementById("btnGo").style.display="none",document.getElementById("btnForget").style.display="none",document.getElementById("EmailLogin").style.backgroundColor="transparent",document.getElementById("PasswordLogin").style.backgroundColor="transparent",document.getElementById("FullName").style.backgroundColor="transparent",document.getElementById("UserTypeSignUp").style.backgroundColor="transparent",document.getElementById("account_mobile").style.backgroundColor="transparent"):n=="cancelSignUp"?(document.getElementById("signupControls").style.display="none",document.getElementById("btnSignUpServer").style.display="none",document.getElementById("btnSignUp").style.display="block",document.getElementById("btnGo").style.display="block",document.getElementById("btnForget").style.display="block",document.getElementById("EmailLogin").style.backgroundColor="transparent",document.getElementById("PasswordLogin").style.backgroundColor="transparent",document.getElementById("FullName").style.backgroundColor="transparent",document.getElementById("account_mobile").style.backgroundColor="transparent",document.getElementById("UserTypeSignUp").style.backgroundColor="transparent",document.getElementById("EmailLogin").value="",document.getElementById("PasswordLogin").value="",document.getElementById("FullName").value="",document.getElementById("account_mobile").value=""):n=="forgot"?(document.getElementById("passwordDIV").style.display="none",document.getElementById("btnRecover").style.display="block",document.getElementById("btnForget").style.display="none",document.getElementById("btnGo").style.display="none",document.getElementById("btnCancel").style.display="block",document.getElementById("btnForget").style.display="none",document.getElementById("btnSignUp").style.display="none"):n=="cancelForgot"?(document.getElementById("verificationTextDIV").style.display="none",$("verificationText").value="",document.getElementById("newPasswordDIV").style.display="none",document.getElementById("btnForget").style.display="none",document.getElementById("btnRecover").style.display="none",document.getElementById("verificationTextDIV").style.display="none",document.getElementById("btnSaveNewLogin").style.display="none",document.getElementById("btnForget").style.display="block",document.getElementById("btnGo").style.display="block",document.getElementById("passwordDIV").style="none",document.getElementById("passwordDIV").className="form-group",document.getElementById("btnCancel").style.display="none",document.getElementById("btnSignUp").style.display="block",document.getElementById("verificationText").style.backgroundColor="transparent",document.getElementById("EmailLogin").style.backgroundColor="transparent",document.getElementById("verificationText").value="",document.getElementById("EmailLogin").value=""):n=="verify"&&(document.getElementById("EmailLogin").value==""?document.getElementById("EmailLogin").style.backgroundColor="maroon":(document.getElementById("EmailLogin").style.backgroundColor="transparent",$.ajax({url:basePath+"/CORE/VERIFY",type:"GET",dataType:"json",headers:{ApiKey:"XYZ","WebAPI-Email":document.getElementById("EmailLogin").value},success:function(n,t,i){i.status==201?(document.getElementById("verificationTextDIV").style="none",document.getElementById("verificationTextDIV").className="form-group",document.getElementById("newPasswordDIV").style="block",document.getElementById("newPasswordDIV").className="form-group",document.getElementById("btnSaveNewLogin").style.display="block",document.getElementById("btnRecover").style.display="none",document.getElementById("btnCancel").style.display="none",showMessage("","success","SUCCESS:","Verification code emailed")):(document.getElementById("EmailLogin").style.backgroundColor="maroon",showMessage("","error","SERVER ERROR","No data found"))},error:function(){document.getElementById("EmailLogin").style.backgroundColor="maroon";showMessage("","error","SERVER ERROR","An error occured or no such user")}})))}function SaveLogin(){document.getElementById("EmailLogin").value==""?document.getElementById("EmailLogin").style.backgroundColor="maroon":document.getElementById("verificationText").value==""?(document.getElementById("verificationText").style.backgroundColor="maroon",document.getElementById("EmailLogin").style.backgroundColor="transparent"):(document.getElementById("verificationText").style.backgroundColor="transparent",document.getElementById("EmailLogin").style.backgroundColor="transparent",$.ajax({url:basePath+"/CORE/SUBMITNEW",type:"GET",dataType:"json",headers:{ApiKey:"XYZ","WebAPI-Email":document.getElementById("EmailLogin").value,"WebAPI-Code":document.getElementById("verificationText").value,"WebAPI-NewPassword":document.getElementById("newPassword").value},success:function(n,t,i){i.status==201&&(document.getElementById("PasswordLogin").value=document.getElementById("newPassword").value,validateUser(),showMessage($("#LoginModal"),"success","Hi "+i.getResponseHeader("Email"),"Password activated, log in now."))},error:function(){showMessage("","error","SERVER ERROR","Server error detected with inputs");document.getElementById("EmailLogin").style.backgroundColor="maroon";document.getElementById("verificationText").style.backgroundColor="maroon"}}))}function UpdateAccountSection(){localStorage==null||localStorage.Authorization==null?$("#account").load(basePath+"/views/core/Login.html"):$("#account").load(basePath+"/views/core/BasicProfile.html")}function Signout(){localStorage.clear();UpdateAccountSection()}function validateUser(){var n=document.getElementById("EmailLogin").value;document.getElementById("EmailLogin").value!=""&&document.getElementById("EmailLogin").checkValidity()?document.getElementById("PasswordLogin").value==""?(document.getElementById("PasswordLogin").style.backgroundColor="maroon",document.getElementById("EmailLogin").style.backgroundColor="transparent"):(document.getElementById("EmailLogin").style.backgroundColor="transparent",document.getElementById("PasswordLogin").style.backgroundColor="transparent",$.ajax({url:basePath+"/CORE/AUTHTOKEN",type:"GET",headers:{ApiKey:"XYZ","WebAPI-Email":$("#EmailLogin").val(),"WebAPI-Password":$("#PasswordLogin").val(),"WebAPI-VerificationText":$("#verificationText").val()},success:function(n,t,i){i.status==200?(localStorage.setItem("Authorization",i.getResponseHeader("WebAPI-AuthToken")),localStorage.setItem("UserType",i.getResponseHeader("UserType")),localStorage.setItem("UserId",i.getResponseHeader("UserId")),UpdateAccountSection()):(document.getElementById("PasswordLogin").style.backgroundColor="maroon",document.getElementById("EmailLogin").style.backgroundColor="maroon",showMessage("","error","Invalid Login",n.responseJSON.message),alert(i.statusText))},error:function(n){document.getElementById("PasswordLogin").style.backgroundColor="maroon";document.getElementById("EmailLogin").style.backgroundColor="maroon";showMessage("","error","Invalid Login",n.responseJSON.message);n.responseJSON.message=="Account not verified, check email and use supplied code below"&&(VerificationMail(document.getElementById("EmailLogin").value),document.getElementById("verificationTextDIV").style.display="block",document.getElementById("verificationTextDIV").className="form-group",document.getElementById("verificationText").style.backgroundColor="maroon")}})):(document.getElementById("EmailLogin").style.backgroundColor="maroon",document.getElementById("PasswordLogin").style.backgroundColor="transparent")}function signUp(){var n=1,t;document.getElementById("EmailLogin").style.backgroundColor="transparent";document.getElementById("PasswordLogin").style.backgroundColor="transparent";document.getElementById("FullName").style.backgroundColor="transparent";document.getElementById("UserTypeSignUp").style.backgroundColor="transparent";document.getElementById("account_mobile").style.backgroundColor="transparent";document.getElementById("EmailLogin").checkValidity()&&document.getElementById("EmailLogin").value!=""&&document.getElementById("EmailLogin").value!="EMail: REQUIRED"||(document.getElementById("EmailLogin").style.backgroundColor="maroon",n=0);(document.getElementById("PasswordLogin").value==""||document.getElementById("PasswordLogin").value=="Password: REQUIRED")&&(document.getElementById("PasswordLogin").style.backgroundColor="maroon",n=0);(document.getElementById("FullName").value==""||document.getElementById("FullName").value=="Full Name: REQUIRED")&&(document.getElementById("FullName").style.backgroundColor="maroon",n=0);document.getElementById("account_mobile").checkValidity()&&document.getElementById("account_mobile").value!=""&&document.getElementById("account_mobile").value!="Mobile: REQUIRED"||(document.getElementById("account_mobile").style.backgroundColor="maroon",n=0);(document.getElementById("UserTypeSignUp").value=="-1"||document.getElementById("PasswordLogin").value=="User Type: REQUIRED")&&(document.getElementById("UserTypeSignUp").style.backgroundColor="maroon",n=0);n&&(t={FirstName:document.getElementById("FullName").value,Email:document.getElementById("EmailLogin").value,Password:document.getElementById("PasswordLogin").value,UserType:document.getElementById("UserTypeSignUp").value,ReferredBy:document.getElementById("referralCode").value,Mobile:document.getElementById("account_mobile").value},$.ajax({url:basePath+"/CORE/CREATE",type:"POST",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",async:!1,headers:{ApiKey:"XYZ"},success:function(n,t,i){i.status==201&&(VerificationMail(document.getElementById("EmailLogin").value),showHideContent("cancelSignUp"),document.getElementById("verificationTextDIV").style.display="block",document.getElementById("verificationTextDIV").className="form-group",showMessage("","success","Welcome","Sign up succeeded. We sent verification code on Email provided, use it with login credentials here."))},error:function(n,t,i){i=="Conflict"?(showHideContent("cancelSignUp"),showMessage("","error","SignUp failed","Account exists. Recover now.")):showMessage("","error","Signup failed, retry.","Check Connection");document.getElementById("EmailLogin").style.backgroundColor="maroon";document.getElementById("PasswordLogin").style.backgroundColor="maroon";document.getElementById("FullName").style.backgroundColor="maroon";document.getElementById("UserTypeSignUp").style.backgroundColor="maroon"}}))}function VerificationMail(n){$.ajax({url:basePath+"/CORE/VERIFYEMAIL",type:"GET",dataType:"json",headers:{ApiKey:"XYZ","WebAPI-Email":n},success:function(n,t,i){i.status!=201&&showMessage("","error","SERVER ERROR","An error occured contact support")},error:function(){document.getElementById("EmailLogin").style.backgroundColor="maroon";showMessage("","error","SERVER ERROR","An error occured or no such user")}})}var myMessages=["info","warning","error","success"],basePath=location.origin;jQuery.ajaxSetup({beforeSend:function(){jQuery("#loading").show()},complete:function(){jQuery("#loading").hide()}});hideMessage=function(n){$("#mycarousel").animate({top:-25},900);$(this).animate({top:-$(this).outerHeight()},n)};$(document).ready(function(){$("html").ajaxStart(function(){$(this).addClass("wait")});$("html").ajaxStop(function(){$(this).removeClass("wait")});$("#studentMenu").hide();$("#signoutMenu").hide();$("#institutesMenu").hide();$("#professionalsMenu").hide();$("#corporatesMenu").hide();$("#labshareMenu").hide();$("#welcomeMenu").hide();$("#adminMenu").hide()});